<template name="User_Profile_Page">
  {{#if hasTutorial}}
    <div class="ui yellow message transition container">
      <p style="font-size: 14px;">Want to turn off tutorials? Change the tutorial settings in the Profile dropdown.</p>
      <i class="close icon"></i>
      <div class="header">
        <h1>Tutorial</h1>
      </div>
      <p>This is your profile page! You should add your information here so other's can get to know you.</p>
      <h2 style="margin: 0px;">What's a Pro and Stud?</h2>
      <p>List the courses you're strong in under "Pros". Make sure they're classes you're comfortable teachings, since
        others may ask you to lead a study session on it! You can change these at any time by clicking edit.</p>
      <p>List the courses you're weak in under "Studs". Pros may reach out to you to help you with these courses. You
        can change these at any time by clicking edit.</p>
    </div>
  {{/if}}

  {{#if Template.subscriptionsReady}}
    <div id="newUser" class="ui modal">
      {{> Create_New_User_Modal}}
    </div>

    <div class="ui raised segment container">
      <h2>{{ getUser.name }}</h2>
      {{#if userExists}}
      {{else}}
        <script>
          $('#newUser').modal({ blurring: true, closable: false }).modal('show');
        </script>
        <!--{{createNewUser}}-->
      {{/if}}
    </div>

    <div class="ui three column grid container">
      <div class="row">
        <div class="ui four wide column">
          <div class="ui raised card profile">
            <img class="ui medium fluid image" src="{{ getUser.profilePicture }}">
            <p>Interests: {{ getUser.interests }}</p>
            <div class="extra">Rate:
              <div class="ui centered huge star rating" data-rating={{getAverageRate}} data-max-rating="5"></div>
            </div>
            <a href="reviews">
              <div class="ui bottom attached button" href="reviews">
                Reviews
              </div>
            </a>
          </div>
          {{#if hasTutorial}}
            <div class="ui yellow message transition container">
              <i class="close icon"></i>
              <div class="header">
                <h3>Hey, over here!</h3>
              </div>
              <p>Your star rating is based on reviews other users have written about you. Click on the "Reviews" button above to
                see what they're written.</p>
            </div>
          {{/if}}
        </div>

        <div class="ui twelve wide column">
          <div class="ui raised segment">
            <a class="ui huge teal ribbon label">Pros</a>
            <div align="right">
              <button class="ui button edit-pro"> edit</button>
            </div>
            <!--Show after edit-->
            <form class="ui form add-pro">
              <div class="two fields">
                <div class="field">
                  <label>Course</label>
                  <select class="ui fluid search dropdown" name="course" id="course">
                    <option value="">Select a Course</option>
                    <option value="ICS 111">ICS 111 - Introduction to Computer Science I</option>
                    <option value="ICS 141">ICS 141 - Discrete Mathematics for Computer Science I</option>
                    <option value="ICS 211">ICS 211 - Introduction to Computer Science II</option>
                    <option value="ICS 241">ICS 241 - Discrete Mathematics for Computer Science II</option>
                    <option value="ICS 314">ICS 314 - Software Engineering I</option>
                    <option value="MATH 241">MATH 241 - Calculus I</option>
                    <option value="MATH 242">MATH 242 - Calculus II</option>
                    <option value="MATH 371">MATH 371 - Elementary Probability Theory</option>
                  </select>
                </div>
                <div class="field">
                  <label>Proficiency Level</label>
                  <select class="ui fluid search dropdown" name="profLevel" id="profLevel">
                    <option value="">Select a proficiency level</option>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>x
                    <option value="high">High</option>x
                  </select>
                </div>
              </div>
              <button class="ui teal button" type="submit">Add</button>
            </form>

            <div class="ui divided selection list">
              {{#each course in prosList}}
                <a class="item">
                  <div class="ui large green horizontal label">{{course.course}}</div>
                  {{course.profLevel}}
                </a>
              {{/each}}

              <a class="item">
                <div class="ui large green horizontal label">ICS 141</div>
                Discrete Mathematics for Computer Science I
              </a>

              <a class="item">
                <div class="ui large green horizontal label">ICS 241</div>
                Discrete Mathematics for Computer Science II
              </a>

              <a class="item">
                <div class="ui large green horizontal label">MATH 241</div>
                Calculus I
              </a>

              <a class="item">
                <div class="ui large yellow horizontal label">MATH 242</div>
                Calculus II
              </a>

              <a class="item">
                <div class="ui large yellow horizontal label">MATH 371</div>
                Elementary Probability Theory
              </a>
            </div>
          </div>

          <div class="ui raised segment">
            <a class="ui huge green ribbon label">Studs</a>
            <div align="right">
              <button class="ui button edit-stud"> edit</button>
            </div>
            <div class="ui divided selection list">
              <a class="item">
                <div class="ui large red horizontal label">ICS 311</div>
                Algorithms
              </a>

            </div>
          </div>
        </div>
      </div>


    </div>

    <script>
      $('.ui.radio.checkbox').checkbox();
      $('.ui.rating').rating('disable');
      $('.message .close').on('click', function() {
            $(this)
                .closest('.message')
                .transition('fade')
            ;
          })
      ;
    </script>

  {{else}}
    {{>Loading}}
  {{/if}}
</template>